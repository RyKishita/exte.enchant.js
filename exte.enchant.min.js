var __extends=this.__extends||function(d,b){function l(){this.constructor=d}l.prototype=b.prototype;d.prototype=new l},exte;
(function(d){function b(a){return 1>=a?0:Math.floor(Math.random()*a)}function l(a,c){var e=a;if(c)for(var b=1;b<c;b++)e+=a;return e}function j(a){return 0>a?j(a+2*Math.PI):2*Math.PI<=a?j(a-2*Math.PI):a}function t(a,c){for(var e=[],b=0;b<c;b++)e.push(a);return e}function h(a,c,e,b,f,k){var c=c||1,e=e||"icon0.png",b=b||16,f=f||16,k=k||16,d=a%k*b,a=Math.floor(a/k)*f,k=new enchant.Surface(b*c,f);k.draw(enchant.Game.instance.assets[e],d,a,b*c,f,0,0,b*c,f);return k}function i(a,c,e,b,f,k,d,h,g,i,j,y,l){for(var k=
k||f,d=d||f,h=h||f,g=g||f,i=i||f,j=j||f,y=y||f,l=l||f,p=[],q=0;q<e;q++){var m;0==q?(m=t(d,b),m[0]=k,m[b-1]=h):q+1<e?(m=t(f,b),m[0]=g,m[b-1]=i):(m=t(y,b),m[0]=j,m[b-1]=l);p.push(m)}c=new enchant.Map(c,c);c.image=enchant.Game.instance.assets[a];c.loadData(p);return c}function y(a,c,e,b){var f=new enchant.Surface(a,c),k=f.context;b?(k.fillStyle=e,k.fillRect(0,0,a,c)):(k.strokeStyle=e,k.strokeRect(0,0,a,c));return f}function H(a,c,e,b){var f=new enchant.Sprite(a,c);f.image=y(a,c,e,b);return f}function z(a,
c,e){var b=new enchant.Surface(2*a,2*a),f=b.context,k=f.lineWidth;e?f.fillStyle=c:f.strokeStyle=c;f.beginPath();f.arc(a,a,a-k,0,2*Math.PI,!0);e?f.fill():f.stroke();return b}function C(a,c,e,b){var f=new enchant.Surface(a,c),k=f.context;b?k.fillStyle=e:k.strokeStyle=e;var e=a/2,d=c/2,h=k.lineWidth;k.beginPath();var g=4*(Math.sqrt(2)-1)*e/3,i=4*(Math.sqrt(2)-1)*d/3;k.moveTo(e,h);k.bezierCurveTo(e+g,h,a-h,d-i,a-h,d);k.bezierCurveTo(a-h,d+i,e+g,c-h,e,c-h);k.bezierCurveTo(e-g,c-h,h,d+i,h,d);k.bezierCurveTo(h,
d-i,e-g,h,e,h);b?k.fill():k.stroke();return f}function D(a,c,e,b,f){var k=new enchant.Surface(2*a,2*a),d=k.context,h=d.lineWidth,g=c-0.5*e,c=c+0.5*e;f?d.fillStyle=b:d.strokeStyle=b;d.beginPath();d.moveTo(a,a);d.arc(a,a,a-h,g,c,!1);d.lineTo(a,a);f?d.fill():d.stroke();return k}d.rand=b;d.getUserAgent=function(){var a=navigator.userAgent;return 0<a.indexOf("iPhone")&&-1==a.indexOf("iPad")||0<a.indexOf("iPod")?"iOS":0<a.indexOf("Android")?"Android":0<a.indexOf("Chrome")?"Chrome":0<a.indexOf("Firefox")?
"Firefox":0<a.indexOf("Opera")?"Opera":"Other"};d.trace=function(){for(var a=[],c=0;c<arguments.length-0;c++)a[c]=arguments[c+0];if(0!=a.length){a=Array.prototype.slice.call(a,0);for(c=0;c<a.length;c++)console.log(a[c])}};d.makeRepeatString=l;d.makeSpace=function(a){return l("&nbsp;",a)};var g=function(a){this._table=[];this.range=a};Object.defineProperty(g.prototype,"next",{get:function(){var a=[];this._table.forEach(function(c,e){0==b(c)&&a.push(e)});var c;c=0<a.length?a[b(a.length)]:b(this.range);
this._table[c]+=this.range;for(var e=0;e<this.range;e++)this._table[e]--;return c},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"range",{get:function(){return this._table.length},set:function(a){a<this.range&&(this._table.length=0);for(var c=this.range;c<a;c++)this._table.push(a)},enumerable:!0,configurable:!0});d.AverageRandamizer=g;d.toRGBString=function(){for(var a=[],c=0;c<arguments.length-0;c++)a[c]=arguments[c+0];var e,b;3<=a.length?(c=a[0],e=a[1],b=a[2],a=4<=a.length?a[3]:
1):1<=a.length?(c=e=b=a[0],a=2<=a.length?a[1]:1):c=e=b=a=0;return"rgba("+c+","+e+","+b+","+a+")"};d.shuffleArray=function(a){for(var c=[];0<a.length;){var e=b(a.length),e=a.splice(e,1)[0];c.push(e)}return c};d.makeKanji=function(a,c,e){a=Math.floor(a);if(0==a)return c[0];for(var b=e.length,f=[];0<a;){f.push(a%10);if(e.length+1<f.length){f.length=e.length;for(a=0;a<e.length;a++)f[a]=9;break}a=Math.floor(a/10)}for(a="";0<f.length;){var k=f.pop(),d="";0<f.length&&(d=e[f.length-1]);if(0!=k&&(1!=k||f.length==
b||0==f.length))a+=c[k];0<k&&(a+=d)}return a};d.degToRad=function(a){return a*Math.PI/180};d.radToDeg=function(a){return 180*a/Math.PI};d.normalinzeRad=j;d.normalinzeDeg=function(a){return 0>a?this.normalinzeDeg(a+360):360<=a?this.normalinzeDeg(a-360):a};d.angleToDirection=function(a){a=j(a);return a<0.25*Math.PI?2:a<0.75*Math.PI?0:a<1.25*Math.PI?1:a<1.75*Math.PI?3:2};d.directionToAngle=function(a){switch(a){case 0:return 0.5*Math.PI;case 1:return 1*Math.PI;case 2:return 0*Math.PI;case 3:return 1.5*
Math.PI}};d.getNarrowAngle=function(a,c){var a=j(a),c=j(c),e=Math.min(a,c),b=Math.max(a,c),f=b-e;Math.PI<f&&(f=e+2*Math.PI-b);return f};d.getDistance=function(a,c){var e=a.x-c.x,b=a.y-c.y;return Math.sqrt(e*e+b*b)};d.getAngle=function(a,c){return Math.atan2(c.y-a.y,c.x-a.x)};d.makeValues=t;d.createMaze=function(a,c,e){if(0==a%2||0==c%2)throw Error("arguments error");var n=[];n.length=a;if(e)for(var f=0;f<a;f++)0==f||f==a-1?n[f]=t(1,c):(n[f]=t(0,c),n[f][0]=n[f][c-1]=1);else for(f=0;f<a;f++)n[f]=t(0,
c);var d=f=1;e&&(f++,d++,a--,c--);for(var e=4,h=[1,0,-1,0],g=[0,1,0,-1];f<a;f+=2){for(var i=d;i<c;i+=2){n[f][i]=1;var j=b(e);n[f+g[j]][i+h[j]]=1}4==e&&(e=3)}return n};d.randomString=function(a,c){c||(c="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");for(var e="",a=a||1,n=0;n<a;n++)e+=c.charAt(b(c.length));return e};d.round=function(a,c){if(c){var e=Math.pow(10,c);return Math.round(a*e)/e}return Math.round(a)};d.ceil=function(a,c){if(c){var e=Math.pow(10,c);return Math.ceil(a*e)/e}return Math.ceil(a)};
d.floor=function(a,c){if(c){var e=Math.pow(10,c);return Math.floor(a*e)/e}return Math.floor(a)};d.paddingLeft=function(a,c,e){e=e||"0";a=a.toString();for(c-=a.length;0<c--;)a=e+a;return a};d.paddingRight=function(a,c,e){e=e||"0";a=a.toString();for(c-=a.length;0<c--;)a+=e;return a};d.formatString=function(a){for(var c=[],e=0;e<arguments.length-1;e++)c[e]=arguments[e+1];e=void 0;e=1==c.length&&"object"==typeof c[0]?function(a,e){return c[0][e]}:function(a,e){return c[parseInt(e)+1]};return a.replace(/\{(\w+)\}/g,
e)};d.arrayEraseIf=function(a,c){for(var e=a.length-1;0<=e;e--)c(a[e],e,a)&&a.splice(e,1)};var A;A=function(a,c){this.row=a;this.column=c};d.MapPoint=A;var B,I=A,g=function(a,c,e,b){I.call(this,a,c);this.valid=!0;this.row=a;this.column=c;this.rest=e;this.routes=b};__extends(g,I);B=g;d.ResultRoute=B;var E;E=function(){};d.ResultMoveCost=E;g=function(a){this.map=a;this.rowNum=a.length;this.columnNum=a[0].length;this.limitLeft=0;this.limitRight=this.columnNum-1;this.limitTop=0;this.limitBottom=this.rowNum-
1};g.prototype.getSamePoints=function(a,c,e){function b(a,c,n){h.some(function(a){return a.row==c&&a.column==n})||((a=e(f,a[c][n]))&&d.push(new A(c,n)),h.push({row:c,column:n,valid:a}))}var f=this.map[a][c];void 0===e&&(e=function(a,c){return a==c});var d=[],h=[];for(b(this.map,a,c);;){a=null;for(c=0;c<h.length;c++)if(h[c].valid){a=h[c];break}if(null==a)break;a.valid=!1;this.limitTop<a.row&&b(this.map,a.row-1,a.column);this.limitLeft<a.column&&b(this.map,a.row,a.column-1);a.row+1<this.limitBottom&&
b(this.map,a.row+1,a.column);a.column+1<this.limitRight&&b(this.map,a.row,a.column+1)}return d};g.prototype.getRoute=function(a,c,e){function b(a,c,e,n,d){a=a[c][e];if(!(n<a)){for(var n=n-a,a=[],h=0;h<d.length;h++)a.push(d[h].concat([new A(c,e)]));d=f.filter(function(a){return a.row==c&&a.column==e});if(0<d.length){var g=d[0];g.rest<n?(g.rest=n,g.routes=a,g.valid=!0):g.rest==n&&(a.forEach(function(a){return g.routes.push(a)}),g.valid=!0)}else f.push(new B(c,e,n,a))}}var a=new B(a,c,e,[[]]),f=[];f.push(a);
for(a=!0;;){c=null;for(e=0;e<f.length;e++)if(f[e].valid){c=f[e];break}if(null==c)break;c.valid=!1;this.limitTop<c.row&&b(this.map,c.row-1,c.column,c.rest,c.routes);this.limitLeft<c.column&&b(this.map,c.row,c.column-1,c.rest,c.routes);c.row+1<this.limitBottom&&b(this.map,c.row+1,c.column,c.rest,c.routes);c.column+1<this.limitRight&&b(this.map,c.row,c.column+1,c.rest,c.routes);a&&(a=!1,c.rest=-1)}for(e=f.length-1;0<=e;e--)c=f[e],0>c.rest&&f.splice(e,1);return f};g.prototype.calcMoveCost=function(a,
c,e,b,f){var d=0;if(e!=f){for(var h=Math.min(e,f),g=Math.max(e,f),h=h+1;h<g;h++)d+=a[c][h];d+=a[c][f]}if(c!=b){h=Math.min(c,b);g=Math.max(c,b);for(h+=1;h<g;h++)d+=a[h][f];d+=a[b][f]}var i=this.getRoute(c,e,d),j;i.forEach(function(a){a.row==b&&a.column==f&&(j=i)});for(c=d=0;c<j[0].length;c++)e=j[0][c],d+=a[e.row][e.column];a=new E;a.cost=d;a.routes=j;return a};d.MapPointSeacher=g;d.createIconSurface=h;d.createIconSprite=function(a,c,e,b,f,d){var c=c||1,e=e||"icon0.png",b=b||16,f=f||16,g=new enchant.Sprite(b,
f);1==c?(g.image=enchant.Game.instance.assets[e],g.frame=a):(g.image=h(a,c,e,b,f,d),g.frame=0);return g};d.isDebug=function(){return enchant.Game.instance._debug};d.playSound=function(a){enchant.Game.instance.assets[a].clone().play()};var J=enchant.Node,g=function(a,c,e){J.call(this);this._sound=enchant.Sound.load(a);this._fadeSec=c||5;this._volume=e||1;this.addEventListener(enchant.Event.ENTER_FRAME,this.enterFrame)};__extends(g,J);g.prototype.play=function(){this._sound.volume=this._volume;this._sound.play()};
g.prototype.pause=function(){this._sound.pause()};g.prototype.stop=function(){this._sound.stop()};g.prototype.enterFrame=function(){this._fadeSec<this._sound.duration-this._sound.currentTime||(this._sound.volume=this._volume*(this._sound.duration-this._sound.currentTime)/this._fadeSec,0.01>this._sound.volume&&(this._sound.currentTime=0,this.play()))};d.RepeatSoundPlayer=g;d.Event_SceneInput="exte.enchant.Event_SceneInput";var K=enchant.Event,F=function(a){K.call(this,a)};__extends(F,K);d.SceneExEvent=
F;var G;G=function(){this.frame=this.index=0;this.active=!1};d.InputPatternData=G;var L=enchant.Scene,x=function(){L.call(this);this.inputPatterns=[];this.addEventListener(enchant.Event.ENTER_FRAME,this.enterFrame);[enchant.Event.LEFT_BUTTON_DOWN,enchant.Event.LEFT_BUTTON_UP,enchant.Event.RIGHT_BUTTON_DOWN,enchant.Event.RIGHT_BUTTON_UP,enchant.Event.UP_BUTTON_DOWN,enchant.Event.UP_BUTTON_UP,enchant.Event.DOWN_BUTTON_DOWN,enchant.Event.DOWN_BUTTON_UP,enchant.Event.A_BUTTON_DOWN,enchant.Event.A_BUTTON_UP,
enchant.Event.B_BUTTON_DOWN,enchant.Event.B_BUTTON_UP].forEach(function(a){this.addEventListener(a,this.changeInput)},this)};__extends(x,L);x.prototype.makeEvent=function(a){var c=new F(d.Event_SceneInput);c.eventID=a.eventID;c.sec=a.frame/enchant.Game.instance.fps;enchant.Game.instance.currentScene.dispatchEvent(c)};x.prototype.enterFrame=function(){this.inputPatterns.forEach(function(a){a.active&&a.frame++})};x.prototype.changeInput=function(a){for(var c=0;c<this.inputPatterns.length;c++){var e=
this.inputPatterns[c];e.pattern[e.index]!=a.type?(e.index=0,e.frame=0,e.active=!1):e.index+1<e.pattern.length?(e.index++,e.active=!0):e.loop?(e.active=!0,e.frame<e.framelimit||(this.makeEvent(e),e.frame=0)):(e.frame<=e.framelimit&&this.makeEvent(e),e.index=0,e.frame=0,e.active=!1)}};x.prototype.regist=function(a,c,e,b){var f=new G;f.eventID=a;f.pattern=c;f.framelimit=Math.floor((e||1)*enchant.Game.instance.fps);f.loop=!0===b;this.inputPatterns.push(f)};d.SceneInput=x;d.Event_SceneExStarting="Event_SceneExStarting";
var s=function(a,c,e){x.call(this);this._opacity=1;this._setFadeOut=this._setFadeIn=!1;this._nextSceneName="";this.name=a;s._scenes[a]=this;a=enchant.Game.instance.fps;c=void 0==c?0.5:c;0<c&&(this._fadeInStep=1/(c*a),this.addEventListener(d.Event_SceneExStarting,function(){this._setFadeIn=!0;this.opacity=0}));c=void 0==e?0.5:e;this._fadeOutStep=0==c?1:1/(c*a);this.addEventListener(enchant.Event.ENTER_FRAME,this.enterFrame)};__extends(s,x);s._scenes=[];s.prototype.enterFrame=function(){this._setFadeIn&&
this._fadeIn()&&(this._setFadeIn=!1);this._setFadeOut&&this._fadeOut()&&(this._setFadeOut=!1,this.sceneNext())};s.prototype.sceneNext=function(){var a=s._scenes[this._nextSceneName];a.dispatchEvent(new enchant.Event(d.Event_SceneExStarting));a===this?a.dispatchEvent(new enchant.Event(enchant.Event.ENTER)):enchant.Game.instance.replaceScene(a)};s.prototype._fadeIn=function(){if(1-this._fadeInStep<=this.opacity)return this.opacity=1,!0;this.opacity+=this._fadeInStep;return!1};s.prototype._fadeOut=function(){if(this.opacity<=
this._fadeOutStep)return this.opacity=0,!0;this.opacity-=this._fadeOutStep;return!1};s.prototype._setOpacityChilds=function(a,c){if(void 0!==a.childNodes)for(var e=0;e<a.childNodes.length;e++){var b=a.childNodes[e];void 0!==b.opacity&&(b.opacity=c);this._setOpacityChilds(b,c)}};Object.defineProperty(s.prototype,"fadeProsessing",{get:function(){return this._setFadeIn||this._setFadeOut},enumerable:!0,configurable:!0});Object.defineProperty(s.prototype,"opacity",{get:function(){return this._opacity},
set:function(a){this._opacity=a;this._setOpacityChilds(this,a)},enumerable:!0,configurable:!0});s.prototype.moveSceneTo=function(a){this._nextSceneName=a;this._setFadeOut=!0};d.SceneEx=s;d.addFadeOutText=function(a,c,e,b){void 0!==enchant.util.MutableText&&(c=new enchant.util.MutableText(c.x,c.y),c.text=e,c.fedingValue=1/(enchant.Game.instance.fps*(b||1)),c.addEventListener(enchant.Event.ENTER_FRAME,function(){this.opacity-=this.fedingValue;this.opacity<this.fedingValue&&this.parentNode.removeChild(this)}),
a.addChild(c))};d.keyBind=function(a,c){var e=enchant.Game.instance;e.keybind(a[0].toUpperCase().charCodeAt(0),c);e.keybind(a[0].toLowerCase().charCodeAt(0),c)};d.Event_TimerTimeOut="Event_TimerTimeout";var M=enchant.Node,g=function(){M.call(this);this._startFrame=this._frame=0;this._active=!1;this._startFrame=this._frame=0;this._active=!1;this.addEventListener(enchant.Event.ENTER_FRAME,function(){this._active&&(this._frame--,0<this._frame||(enchant.Game.instance.currentScene.dispatchEvent(new enchant.Event(d.Event_TimerTimeOut)),
this._frame=this._startFrame))})};__extends(g,M);g.prototype.start=function(a){"number"==typeof a&&(this._frame=this._startFrame=a*enchant.Game.instance.fps);this._active=0<this._startFrame};g.prototype.stop=function(){this._active=!1};d.Timer=g;d.inputToRad=function(){var a=enchant.Game.instance.input;return a.down&&a.right?0.25*Math.PI:a.down&&a.left?0.75*Math.PI:a.up&&a.left?1.25*Math.PI:a.up&&a.right?1.75*Math.PI:a.right?0:a.down?0.5*Math.PI:a.up?1.5*Math.PI:a.left?Math.PI:Number.NaN};d.collision2Sprites=
function(a,c){if(0==a.rotation&&0==c.rotation)return a.intersect(c);var e=Array(9),b=Array(9);e[0]={X:a.x,Y:a.y};e[1]={X:a.x+a.width,Y:a.y};e[2]={X:a.x+a.width,Y:a.y+a.height};e[3]={X:a.x,Y:a.y+a.height};e[4]={X:a.x,Y:a.y};e[5]={X:a.x+a.width/2,Y:a.y};e[6]={X:a.x+a.width/2,Y:a.y+a.height};e[7]={X:a.x,Y:a.y+a.height/2};e[8]={X:a.x+a.width,Y:a.y+a.height/2};b[0]={X:c.x,Y:c.y};b[1]={X:c.x+c.width,Y:c.y};b[2]={X:c.x+c.width,Y:c.y+c.height};b[3]={X:c.x,Y:c.y+c.height};b[4]={X:c.x,Y:c.y};b[5]={X:c.x+c.width/
2,Y:c.y};b[6]={X:c.x+c.width/2,Y:c.y+c.height};b[7]={X:c.x,Y:c.y+c.height/2};b[8]={X:c.x+c.width,Y:c.y+c.height/2};for(var f=0;f<e.length;f++)e[f].X-=a.x+a.width/2,e[f].Y-=a.y+a.height/2;for(f=0;f<b.length;f++)b[f].X-=c.x+c.width/2,b[f].Y-=c.y+c.height/2;for(f=0;f<e.length;f++){var d=e[f].X,h=e[f].Y;e[f].X=d*Math.cos(a.rotation*Math.PI/180)-h*Math.sin(a.rotation*Math.PI/180);e[f].Y=d*Math.sin(a.rotation*Math.PI/180)+h*Math.cos(a.rotation*Math.PI/180)}for(f=0;f<b.length;f++)d=b[f].X,h=b[f].Y,b[f].X=
d*Math.cos(c.rotation*Math.PI/180)-h*Math.sin(c.rotation*Math.PI/180),b[f].Y=d*Math.sin(c.rotation*Math.PI/180)+h*Math.cos(c.rotation*Math.PI/180);for(f=0;f<e.length;f++)e[f].X+=a.x+a.width/2,e[f].Y+=a.y+a.height/2;for(f=0;f<b.length;f++)b[f].X+=c.x+c.width/2,b[f].Y+=c.y+c.height/2;for(f=0;f<e.length-1;f++)for(d=0;d<b.length-1;d++){var h=(b[d+1].X-b[d].X)*(e[f].Y-b[d].Y)-(b[d+1].Y-b[d].Y)*(e[f].X-b[d].X),g=(b[d+1].X-b[d].X)*(e[f+1].Y-b[d].Y)-(b[d+1].Y-b[d].Y)*(e[f+1].X-b[d].X);if(0>((e[f+1].X-e[f].X)*
(b[d].Y-e[f].Y)-(e[f+1].Y-e[f].Y)*(b[d].X-e[f].X))*((e[f+1].X-e[f].X)*(b[d+1].Y-e[f].Y)-(e[f+1].Y-e[f].Y)*(b[d+1].X-e[f].X))&&0>h*g)return!0}return!1};d.setMazeData=function(a,c,e,b,f){for(var d=[],h=[],g=a.collisionData,i=0;i<c;i++){d.push([]);h.push([]);for(var j=0;j<e;j++)d[i].push(b),h[i].push(g[i][j]?f:-1)}a.loadData(d,h)};d.stringWidth=function(a,c){return a.context.measureText(c).width};d.isOutOfScreen=function(a,c){var e=enchant.Game.instance,c=c|0;return a.x+a.width<c||a.y+a.height<c||e.width-
c<a.x||e.height-c<a.y};d.createSimpleMap=i;d.createSampleMap=function(a,c,e){switch(a){case 0:return i("map1.gif",16,c,e,33);case 1:return i("map1.gif",16,c,e,36);case 2:return i("map1.gif",16,c,e,6);case 3:return i("map1.gif",16,c,e,7);case 4:return i("map1.gif",16,c,e,97);case 5:return i("map1.gif",16,c,e,100);case 6:return i("map1.gif",16,c,e,161);case 7:return i("map1.gif",16,c,e,164);case 8:return i("map1.gif",16,c,e,225);case 9:return i("map1.gif",16,c,e,228);case 10:return i("map1.gif",16,
c,e,33,16,17,18,32,34,48,49,50);case 11:return i("map1.gif",16,c,e,100,83,84,85,99,101,115,116,117);case 12:return i("map1.gif",16,c,e,161,144,145,146,160,162,176,177,178);case 13:return i("map1.gif",16,c,e,164,147,148,149,163,165,179,180,181);case 14:return i("map1.gif",16,c,e,228,211,212,213,227,229,243,244,245)}return i("map1.gif",16,c,e,0)};var N=enchant.Group,g=function(a,c,e,b,f){N.call(this);this.fadeOut=this.fadeIn=0.1;this.scrollPx=2;this.lineHeight=10;this.textAlign=this.wordBreak=this.fontSize=
this.font=this.backgroundColor=this.color=null;this.adjustWidth=!0;this.stackLimit=0;this._labels=[];this._texts=[];this._currentWork=0;this._fadeOutLabel=this._fadeInLabel=null;this._scrollNum=0;this._outAllLog=!1;this._visible=!0;this.x=a;this.y=c;this.width=e;this.height=b;f&&(a=H(e,b,f,!0),this.addChild(a));this.addEventListener(enchant.Event.ENTER_FRAME,this.enterFrame)};__extends(g,N);g.prototype.createLabel=function(){var a=new enchant.Label("");this.adjustWidth&&(a.width=this.width);a.visible=
!1;this.font&&(a.font=this.font);this.addChild(a);this._labels.push(a);return a};g.prototype.enterFrame0=function(){if(0!=this._texts.length){this._outAllLog=this._outAllLog?0<this._texts.length:0<this.stackLimit&&this.stackLimit<=this._texts.length;for(var a=this._texts.shift(),c=null,e=0;e<this._labels.length;e++)if(!this._labels[e].valid){c=this._labels[e];break}c||(c=this.createLabel(),this.wordBreak&&(c._style.wordBreak=this.wordBreak),c.valid=!1);c.x=0;c.y=0;c.text=a.text;c._style.fontSize=
a.fontSize||"";c.color=a.color||"";c.backgroundColor=a.backgroundColor||"";c.height=a.lineHeight||10;c.opacity=0;c.textAlign=a.textAlign||"left";this._fadeInLabel=c;this._scrollNum=c.height;for(e=a=0;e<this._labels.length;e++){var b=this._labels[e];if(b.valid){var f=b.y+b.height;a<f&&(a=f,this._fadeOutLabel=b)}}this._currentWork=this.height<a+c.height?1:2}};g.prototype.enterFrame1=function(){this._outAllLog||this._fadeOutLabel.opacity<this.fadeOut?(this._fadeOutLabel.opacity=0,this._fadeOutLabel.visible=
!1,this._fadeOutLabel.valid=!1,this._currentWork=2):this._fadeOutLabel.opacity-=this.fadeOut};g.prototype.enterFrame2=function(){if(0<this._scrollNum){for(var a=this._outAllLog||this._scrollNum<=this.scrollPx?this._scrollNum:this.scrollPx,c=0;c<this._labels.length;c++){var e=this._labels[c];e.visible&&(e.y+=a)}this._scrollNum-=a}0>=this._scrollNum&&(this._currentWork=3,this._fadeInLabel.visible=!0,this._fadeInLabel.valid=!0)};g.prototype.enterFrame3=function(){this._outAllLog||1-this.fadeIn<this._fadeInLabel.opacity?
(this._fadeInLabel.opacity=1,this._currentWork=0):this._fadeInLabel.opacity+=this.fadeIn};g.prototype.enterFrame=function(){switch(this._currentWork){case 0:this.enterFrame0();break;case 1:this.enterFrame1();break;case 2:this.enterFrame2();break;case 3:this.enterFrame3()}};Object.defineProperty(g.prototype,"visible",{get:function(){return this._visible},enumerable:!0,configurable:!0});g.prototype.set=function(a){if(this._visible!=a){this._visible=a;for(var c=0;c<this._labels.length;c++){var e=this._labels[c];
e.visible=a&&e.valid}}};g.prototype.regist=function(a,c,e,b,f,d){this._texts.push({text:a,color:c||this.color,fontSize:e||this.fontSize,lineHeight:b||this.lineHeight,textAlign:f||this.textAlign,backgroundColor:d||this.backgroundColor})};g.prototype.outAllLog=function(){this._outAllLog=!0};g.prototype.clear=function(){for(var a=this._texts.length=0;a<this._labels.length;a++){var c=this._labels[a];c.visible=c.valid=!1}this._currentWork=0};d.LogList=g;d.createRectangleSurface=y;d.createRectangleSprite=
H;d.createCircleSurface=z;d.createCircleSprite=function(a,c,e){var b=new enchant.Sprite(2*a,2*a);b.image=z(a,c,e);return b};d.createEllipseSurface=C;d.createEllipseSprite=function(a,c,b,d){var f=new enchant.Sprite(a,c);f.image=C(a,c,b,d);return f};d.createArcSurface=D;d.createArcSprite=function(a,c,b,d,f){var h=new enchant.Sprite(2*a,2*a);h.image=D(a,c,b,d,f);return h};var u=function(a,c){this.y=this.x=0;this.x=a||0;this.y=c||0};u.prototype.getDistance=function(a){var c=a.x-this.x,a=a.y-this.y;return Math.sqrt(c*
c+a*a)};u.prototype.isEqual=function(a){return a.x==this.x&&a.y==this.y};u.prototype.clone=function(){return new u(this.x,this.y)};d.Point=u;var v=function(a,c,b,d){this.posS=new u(a,c);this.posE=new u(b,d)};Object.defineProperty(v.prototype,"dx",{get:function(){return this.posE.x-this.posS.x},set:function(a){this.posE.x=this.posS.x+a},enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"dy",{get:function(){return this.posE.y-this.posS.y},set:function(a){this.posE.y=this.posS.y+a},enumerable:!0,
configurable:!0});Object.defineProperty(v.prototype,"length",{get:function(){return this.posS.getDistance(this.posE)},set:function(a){var c=this.length;this.posE.x=this.posS.x+Math.floor(this.dx*a/c);this.posE.y=this.posS.y+Math.floor(this.dy*a/c)},enumerable:!0,configurable:!0});v.prototype.isCross=function(a){var c=-this.dy,b=this.dx,d=this.length;0<d&&(d=1/d);var c=c*d,b=b*d,f=a.dx,d=a.dy,h=c*f+b*d;if(0==h)return!1;c=-(c*a.posS.x+b*a.posS.y+-(this.posS.x*c+this.posS.y*b))/h;if(0>=c||1<c)return!1;
b=a.posS.x+f*c;a=a.posS.y+d*c;return 0>(this.posS.x-b)*(this.posE.x-b)+(this.posS.y-a)*(this.posE.y-a)};v.prototype.createSurface=function(a,c){var b,d,f;this.posS.x<this.posE.x==this.posS.y<this.posE.y?(b=0,d=Math.abs(this.dx),f=Math.abs(this.dy)):(b=Math.abs(this.dy),d=Math.abs(this.dx),f=0);var h=new enchant.Surface(Math.abs(this.dx),Math.abs(this.dy)),g=h.context;g.strokeStyle=a;g.lineWidth=c||1;g.beginPath();g.moveTo(0,b);g.lineTo(d,f);g.stroke();return h};v.prototype.createSprite=function(a,
c){var b=this.createSurface(a,c),d=new enchant.Sprite(b.width,b.height);d.x=Math.min(this.posS.x,this.posE.x);d.y=Math.min(this.posS.y,this.posE.y);d.image=b;return d};v.prototype.clone=function(){return new v(this.posS.x,this.posS.y,this.posE.x,this.posE.y)};d.Line=v;var p=function(a,c,b,d){this.x=a||0;this.y=c||0;this.width=b||0;this.height=d||0};Object.defineProperty(p.prototype,"top",{get:function(){return this.y},set:function(a){this.y=a},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,
"bottom",{get:function(){return this.y+this.height},set:function(a){this.height=Math.abs(a-this.y);a<this.y&&(this.y=a)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"left",{get:function(){return this.x},set:function(a){this.x=a},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"right",{get:function(){return this.x+this.width},set:function(a){this.width=Math.abs(a-this.x);a<this.x&&(this.x=a)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,
"center",{get:function(){return new u(this.x+this.width/2,this.y+this.height/2)},set:function(a){this.x=a.x-this.width/2;this.y=a.y-this.height/2},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"diagonal",{get:function(){return Math.sqrt(this.width*this.width+this.height*this.height)},set:function(a){var c=this.diagonal;0==c?(a*=Math.sqrt(2),this.x-=Math.floor(0.5*a),this.y-=Math.floor(0.5*a),this.width=this.height=Math.floor(a)):this.scale(a/c)},enumerable:!0,configurable:!0});
p.prototype.scale=function(a,c){"number"!=typeof c&&(c=a);var b=this.width*a,d=this.height*c;this.x+=Math.floor(0.5*(this.width-b));this.y+=Math.floor(0.5*(this.height-d));this.width=Math.floor(b);this.height=Math.floor(d)};p.prototype.updateFrom=function(a){this.x=a.x;this.y=a.y;this.height=a.height*a.scaleX;this.width=a.width};p.prototype.setTo=function(a,c){a.x=this.x;a.y=this.y;c?(a.scaleX=a.scaleY=1,a.height=this.height,a.width=this.width):(a.scaleX=this.width/a.width,a.scaleY=this.height/a.height)};
p.prototype.getPixels=function(a){var a=a.context.getImageData(this.left,this.top,this.width,this.height).data,c=[];c.length=this.height;for(var b=0;b<this.height;b++){c[b]=[];c[b].length=this.width;for(var d=0;d<this.width;d++){var f=4*(b*this.width+d);c[b][d]={r:a[f],g:a[f+1],b:a[f+2],a:a[f+3]}}}return c};p.prototype.clone=function(){return new p(this.x,this.y,this.width,this.height)};d.Area=p;var q=function(a,c,b,d){p.call(this,a,c,b,d)};__extends(q,p);q.prototype._calcWidth=function(a){return Math.floor(0.5*
this.width*((a-1)%3))};q.prototype._calcHeight=function(a){return Math.floor(0.5*this.height*(2-Math.floor((a-1)/3)))};q.prototype.hitTest=function(a){return this.x<a.x&&a.x<this.right&&this.y<a.y&&a.y<this.bottom};q.prototype.intersectRect=function(a){return this.x<a.right&&a.x<this.right&&this.y<a.bottom&&a.y<this.bottom};q.prototype.intersectLine=function(a){return this.hitTest(a.posS)||this.hitTest(a.posE)?!0:this.getSideLine(0).isCross(a)||this.getSideLine(1).isCross(a)||this.getSideLine(2).isCross(a)||
this.getSideLine(3).isCross(a)};q.prototype.getPos=function(a){return new u(this.x+this._calcWidth(a),this.y+this._calcHeight(a))};q.prototype.setPos=function(a,c){this.x=c.x-this._calcWidth(a);this.y=c.y-this._calcHeight(a)};q.prototype.adjustPos=function(a){a.x<this.left?a.x=this.left:this.right<a.x&&(a.x=this.right);a.y<this.top?a.y=this.top:this.bottom<a.y&&(a.y=this.bottom)};q.prototype.getRandomPos=function(){return new u(this.x+b(this.width),this.y+b(this.height))};q.prototype.getSideLine=
function(a){var c,b;switch(a){case 0:c=7;b=9;break;case 1:c=1;b=3;break;case 2:c=7;b=1;break;case 3:c=9,b=3}a=new v(0,0,0,0);a.posS=this.getPos(c);a.posE=this.getPos(b);return a};q.prototype.getDiagonalLine=function(a){var c;switch(a){case 1:c=9;break;case 3:c=7;break;case 7:c=3;break;case 9:c=1}var b=new v(0,0,0,0);b.posS=this.getPos(a);b.posE=this.getPos(c);return b};q.prototype.createSurface=function(a,c){return y(this.width,this.height,a,c)};q.prototype.createSprite=function(a,c){var b=this.createSurface(a,
c),d=new enchant.Sprite(b.width,b.height);d.image=b;d.x=this.x;d.y=this.y;return d};q.prototype.clone=function(){return new q(this.x,this.y,this.width,this.height)};d.Rectangle=q;var m=function(a,c,b){p.call(this,a-b,c-b,2*b,2*b)};__extends(m,p);Object.defineProperty(m.prototype,"radius",{get:function(){return this.width/2},set:function(a){var c=Math.floor(0.5*(a-this.radius));this.x-=c;this.y-=c;this.width=2*a},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"diameter",{get:function(){return this.width},
enumerable:!0,configurable:!0});m.prototype.set=function(a){var c=Math.floor(0.5*(a-this.diameter));this.x-=c;this.y-=c;this.width=a};m.prototype.hitTest=function(a){return this.center.getDistance(a)<this.radius};m.prototype.intersectRect=function(){throw Error("Circle.intersectRect is not implemented");};m.prototype.intersectLine=function(){throw Error("Circle.intersectLine is not implemented");};m.prototype.intersectCircle=function(a){var c=(this.diameter+a.diameter)/2,b;return(b=this.x-a.x+(this.width-
a.width)/2)*b+(b=this.y-a.y+(this.height-a.height)/2)*b<c*c};m.prototype.adjustPos=function(a){var c=this.center.getDistance(a);if(!(c<this.radius)){var b=this.center;a.x=b.x+Math.floor(this.radius*(a.x-b.x)/c);a.y=b.y+Math.floor(this.radius*(a.y-b.y)/c)}};m.prototype.getRandomPos=function(){var a=Math.random()*this.radius,c=2*Math.random()*Math.PI,b=this.center;b.x+=Math.floor(Math.cos(c)*a);b.y+=Math.floor(Math.sin(c)*a);return b};m.prototype.createSurface=function(a,c){return z(this.radius,a,c)};
m.prototype.createSprite=function(a,c){var b=this.createSurface(a,c),d=new enchant.Sprite(b.width,b.height);d.image=b;d.x=this.x;d.y=this.y;return d};m.prototype.clone=function(){var a=this.center;return new m(a.x,a.y,this.radius)};d.Circle=m;var w=function(a,c,b,d){p.call(this,a-b/2,c-d/2,b,d)};__extends(w,p);w.prototype.hitTest=function(){throw Error("Ellipse.hitTest is not implemented");};w.prototype.intersectRect=function(){throw Error("Ellipse.intersectRect is not implemented");};w.prototype.intersectLine=
function(){throw Error("Ellipse.intersectLine is not implemented");};w.prototype.adjustPos=function(){throw Error("Ellipse.adjustPos is not implemented");};w.prototype.getRandomPos=function(){throw Error("Ellipse.getRandomPos is not implemented");};w.prototype.createSurface=function(a,c){return C(this.width,this.height,a,c)};w.prototype.createSprite=function(a,c){var b=this.createSurface(a,c),d=new enchant.Sprite(b.width,b.height);d.image=b;d.x=this.x;d.y=this.y;return d};w.prototype.clone=function(){var a=
this.center;return new w(a.x,a.y,this.width,this.height)};d.Ellipse=w;var r=function(a,c,b,d,f){m.call(this,a,c,b);this.angle=j(d|0);this.range=j(f|0)};__extends(r,m);Object.defineProperty(r.prototype,"angleStart",{get:function(){return j(this.angle-0.5*this.range)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"angleEnd",{get:function(){return j(this.angle+0.5*this.range)},enumerable:!0,configurable:!0});r.prototype.hitTest=function(){throw Error("Arc.hitTest is not implemented");
};r.prototype.intersectRect=function(){throw Error("Arc.intersectRect is not implemented");};r.prototype.intersectLine=function(){throw Error("Arc.intersectLine is not implemented");};r.prototype.intersectCircle=function(){throw Error("Arc.intersectCircle is not implemented");};r.prototype.adjustPos=function(){throw Error("Arc.adjustPos is not implemented");};r.prototype.getRandomPos=function(){var a=Math.random()*this.radius,b=this.angle+Math.random()*this.range-0.5*this.range,e=this.center;e.x+=
Math.floor(Math.cos(b)*a);e.y+=Math.floor(Math.sin(b)*a);return e};r.prototype.createSurface=function(a,b){return D(this.radius,this.angle,this.range,a,b)};r.prototype.createSprite=function(a,b){var e=this.createSurface(a,b),d=new enchant.Sprite(e.width,e.height);d.image=e;d.x=this.x;d.y=this.y;return d};r.prototype.clone=function(){var a=this.center;return new r(a.x,a.y,this.radius,this.angle,this.range)};d.Arc=r;var O=enchant.Sprite,g=function(a,b){O.call(this,a,b);this._active=!1;this._radiusLimit=
this._radiusMax=this._radius=0;this._speed=1;this.image=new enchant.Surface(a,b);this.addEventListener(enchant.Event.ENTER_FRAME,function(){this._active&&(this._radius+=this._speed,this._radius<this._radiusMax?this._draw():this.stop())})};__extends(g,O);g.prototype._draw=function(){var a=this.image.context;a.fillStyle="transparent";this.image.clear();a.beginPath();a.arc(this._center.x,this._center.y,this._radius,0,2*Math.PI,!1);a.closePath();a.stroke()};Object.defineProperty(g.prototype,"lineColor",
{get:function(){return this.image.context.strokeStyle},enumerable:!0,configurable:!0});g.prototype.set=function(a){this.image.context.strokeStyle=a};Object.defineProperty(g.prototype,"lineWidth",{get:function(){return this.image.context.lineWidth},set:function(a){this.image.context.lineWidth=a},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"speed",{get:function(){return this._speed},set:function(a){this._speed=a},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,
"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"radiusMax",{get:function(){return this._radiusMax},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"radiusLimit",{get:function(){return this._radiusLimit},set:function(a){this._radiusLimit=a},enumerable:!0,configurable:!0});g.prototype.start=function(a,b){this._center=new u(a,b);this._active=!0;this._radius=0;this._radiusMax=0<this._radiusLimit?this._radiusLimit:this._center.getDistance(new u(this.width/
2<a?0:this.width,this.height/2<b?0:this.height));this.image.clear()};Object.defineProperty(g.prototype,"active",{get:function(){return this._active},set:function(a){this._active!=a&&!(a&&0==this._radiusMax)&&(this._active=a)},enumerable:!0,configurable:!0});g.prototype.stop=function(){this._active=!1;this._radiusMax=0;this.image.clear()};d.Ripple=g;d.pushWaitScene=function(a,b){var e=enchant.Game.instance,d=new enchant.Scene;if(b){var f=new enchant.Sprite(b.width,b.height);f.x=(e.width-b.width)/2;
f.y=(e.height-b.height)/2;f.image=b;d.addChild(f)}d.addEventListener(enchant.Event.ENTER_FRAME,function(){a()&&e.popScene()});e.pushScene(d)};d.http2str=function(a){try{var b=new XMLHttpRequest;b.open("GET",a,!1);b.send(null);if(200==b.status||0==b.status)return b.responseText}catch(e){}return null}})(exte||(exte={}));
(function(d){var b=function(){};b.CARD="card.png";b.ICON="icon0.png";b.FONT="font1.png";b.BACK="enchant_normal.png";b.WIDTH=32;b.HEIGHT=48;b.SUIT_SIZE=4;b.NUME_SIZE=13;b.CARD_SIZE=52;b.SPADE=1;b.HEART=2;b.DIAMOND=3;b.CLUB=4;b.ACE=1;b.JACK=11;b.QUEEN=12;b.KING=13;b.ERROR=-1;b.JOKER=0;b.S01=1;b.S02=2;b.S03=3;b.S04=4;b.S05=5;b.S06=6;b.S07=7;b.S08=8;b.S09=9;b.S10=10;b.S11=11;b.S12=12;b.S13=13;b.H01=14;b.H02=15;b.H03=16;b.H04=17;b.H05=18;b.H06=19;b.H07=20;b.H08=21;b.H09=22;b.H10=23;b.H11=24;b.H12=25;b.H13=
26;b.D01=27;b.D02=28;b.D03=29;b.D04=30;b.D05=31;b.D06=32;b.D07=33;b.D08=34;b.D09=35;b.D10=36;b.D11=37;b.D12=38;b.D13=39;b.C01=40;b.C02=41;b.C03=42;b.C04=43;b.C05=44;b.C06=45;b.C07=46;b.C08=47;b.C09=48;b.C10=49;b.C11=50;b.C12=51;b.C13=52;b.SA=b.S01;b.SJ=b.S11;b.SQ=b.S12;b.SK=b.S13;b.HA=b.H01;b.HJ=b.H11;b.HQ=b.H12;b.HK=b.H13;b.DA=b.D01;b.DJ=b.D11;b.DQ=b.D12;b.DK=b.D13;b.CA=b.C01;b.CJ=b.C11;b.CQ=b.C12;b.CK=b.C13;b.getSuit=function(d){return d==b.JOKER?b.JOKER:d<=b.ERROR||b.CARD_SIZE<d?b.ERROR:Math.floor((d+
b.NUME_SIZE-1)/b.NUME_SIZE)};b.getNumber=function(d){return d==b.JOKER?b.JOKER:d<=b.ERROR||b.CARD_SIZE<d?b.ERROR:(d-1)%b.NUME_SIZE+1};b.getData=function(d,i){return d==b.JOKER||i==b.JOKER?b.JOKER:d<=b.ERROR||b.SUIT_SIZE<d||i<=b.ERROR||b.NUME_SIZE<i?b.ERROR:(d-1)*b.NUME_SIZE+i};b.getCard=function(d){if(d<=b.ERROR||b.CARD_SIZE<d)return null;var i=new enchant.Surface(2*b.WIDTH,b.HEIGHT),j=enchant.Game.instance.assets[b.CARD],t=(b.getNumber(d)-1)*b.WIDTH,z=(b.getSuit(d)-1)*b.HEIGHT;i.draw(j,t,z,b.WIDTH,
b.HEIGHT,0,0,b.WIDTH,b.HEIGHT);i.draw(j,b.WIDTH,4*b.HEIGHT,b.WIDTH,b.HEIGHT,b.WIDTH,0,b.WIDTH,b.HEIGHT);j=new l(b.WIDTH,b.HEIGHT);j.image=i;j.data=d;return j};b.setImage=function(){for(var d=new enchant.Surface(b.WIDTH*b.NUME_SIZE,b.HEIGHT*(b.SUIT_SIZE+1)),i=b.S01;i<=b.CARD_SIZE;i++){var j=(b.getNumber(i)-1)*b.WIDTH,l=(b.getSuit(i)-1)*b.HEIGHT;d.draw(b.drawCard(i),0,0,b.WIDTH,b.HEIGHT,j,l,b.WIDTH,b.HEIGHT)}d.draw(b.drawCard(b.JOKER),0,0,b.WIDTH,b.HEIGHT,0,b.SUIT_SIZE*b.HEIGHT,b.WIDTH,b.HEIGHT);d.draw(b.drawCard(b.ERROR),
0,0,b.WIDTH,b.HEIGHT,b.WIDTH,b.SUIT_SIZE*b.HEIGHT,b.WIDTH,b.HEIGHT);enchant.Game.instance.assets[b.CARD]=d};b.drawCard=function(d){var i=new enchant.Surface(b.WIDTH,b.HEIGHT),j=i.context;j.fillStyle="white";j.strokeStyle="black";j.beginPath();j.moveTo(0,8);j.quadraticCurveTo(0,0,8,0);j.lineTo(22,0);j.quadraticCurveTo(32,0,32,8);j.lineTo(32,40);j.quadraticCurveTo(32,48,22,48);j.lineTo(8,48);j.quadraticCurveTo(0,48,0,40);j.closePath();j.fill();j.stroke();switch(b.getSuit(d)){case b.JOKER:i.draw(enchant.Game.instance.assets[b.ICON],
176,0,16,16,4,12,24,24);break;case b.ERROR:i.draw(enchant.Game.instance.assets[b.BACK],0,0,48,48,0,8,32,32);break;default:j=b.getSuit(d)==b.SPADE?48:b.getSuit(d)==b.HEART?96:b.getSuit(d)==b.DIAMOND?80:b.getSuit(d)==b.CLUB?64:0,i.draw(enchant.Game.instance.assets[b.ICON],j,64,16,16,8,4,16,16),j=enchant.Game.instance.assets[b.FONT],10==b.getNumber(d)?(i.draw(j,16,16,16,16,1,26,16,16),i.draw(j,0,16,16,16,13,26,16,16)):(d=b.getNumber(d)==b.ACE?[16,32]:2==b.getNumber(d)?[32,16]:3==b.getNumber(d)?[48,16]:
4==b.getNumber(d)?[64,16]:5==b.getNumber(d)?[80,16]:6==b.getNumber(d)?[96,16]:7==b.getNumber(d)?[112,16]:8==b.getNumber(d)?[128,16]:9==b.getNumber(d)?[144,16]:b.getNumber(d)==b.JACK?[160,32]:b.getNumber(d)==b.QUEEN?[16,48]:b.getNumber(d)==b.KING?[176,32]:[0,0],i.draw(j,d[0],d[1],16,16,10,26,16,16))}return i};d.Card=b;var l,j=enchant.Sprite,t=function(b,d){j.call(this,b,d)};__extends(t,j);l=t;d.TCardSprite=l})(exte||(exte={}));
(function(d){var b=enchant.Sprite,l=function(){b.call(this,l.WIDTH,l.HEIGHT);this.image=new enchant.Surface(l.WIDTH*l.MAXNUM,l.HEIGHT);for(var d=0;d<l.MAXNUM;d++)this.image.draw(this.drawFace(d+1),d*l.WIDTH,0)};__extends(l,b);l.IMAGE="icon0.png";l.WIDTH=24;l.HEIGHT=34;l.MAXNUM=6;Object.defineProperty(l.prototype,"value",{get:function(){return this.frame},set:function(b){0<b&&b<=l.MAXNUM&&(this.frame=b-1)},enumerable:!0,configurable:!0});l.prototype.drawFace=function(b){var d=[];1==b?d.push(64,80,
96):2==b?d.push(80,96,144):3==b?d.push(96,144,128):4==b?d.push(112,128,64):5==b?d.push(128,64,112):6==b?d.push(144,112,80):d.push(0,0,0);var b=new enchant.Surface(l.WIDTH,l.HEIGHT),h=b.context;h.moveTo(12,0);h.lineTo(24,12);h.lineTo(24,24);h.lineTo(12,34);h.lineTo(0,24);h.lineTo(0,12);h.closePath();h.fill();b.context.setTransform(1,1,-1,1,12,-5);b.draw(enchant.Game.instance.assets[l.IMAGE],d[0],32,16,16,0,0,16,16);b.context.setTransform(1,1,0,1,-2,7);b.draw(enchant.Game.instance.assets[l.IMAGE],d[1],
32,16,16,0,0,16,16);b.context.setTransform(1,-1,0,1,10,23);b.draw(enchant.Game.instance.assets[l.IMAGE],d[2],32,16,16,0,0,16,16);return b};d.Dice=l})(exte||(exte={}));